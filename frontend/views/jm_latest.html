    <transition name="fade" mode="out-in" v-cloak>
        <div v-if="currentTab === 'jm_latest'" class="space-y-6 pb-20">
            <div class="flex items-start justify-between gap-3">
                <div class="min-w-0">
                    <h2 class="text-2xl md:text-3xl font-bold flex items-center gap-3">
                        <span class="material-symbols-rounded text-primary">new_releases</span>
                        JM 最新
                    </h2>
                    <p class="text-sm opacity-60 mt-1">按分类筛选最新更新</p>
                </div>
                <div class="flex items-center gap-2">
                    <button @click="loadJmLatest(1)" :disabled="jmLatestLoading"
                        class="w-10 h-10 rounded-full bg-surface-variant text-on-surface-variant flex items-center justify-center hover:bg-primary hover:text-on-primary transition disabled:opacity-40">
                        <span class="material-symbols-rounded" :class="jmLatestLoading ? 'animate-spin' : ''">refresh</span>
                    </button>
                    <button @click="currentTab = 'home'"
                        class="w-10 h-10 rounded-full bg-surface-variant text-on-surface-variant flex items-center justify-center hover:bg-primary hover:text-on-primary transition">
                        <span class="material-symbols-rounded">arrow_back</span>
                    </button>
                </div>
            </div>

            <div class="md-card p-4 md:p-6 border border-outline/10 space-y-4">
                <div class="flex gap-2 overflow-x-auto max-w-full pb-2 no-scrollbar">
                    <button v-for="c in jmCategories" :key="String(c.CID || c.id || c.name || c.title || c)"
                        @click="selectJmCategoryForLatest(c)"
                        class="h-10 px-4 rounded-full border text-sm font-medium transition whitespace-nowrap"
                        :class="jmLatestCategory === getJmCategoryId(c) ? 'bg-primary text-on-primary border-transparent shadow-md' : 'bg-surface text-on-surface border-outline/20 hover:bg-primary/10'">
                        {{ getJmCategoryTitle(c) }}
                    </button>
                </div>
            </div>

            <loading-state :loading="jmLatestLoading && jmLatestItems.length === 0">
                <span class="mt-2 text-sm text-on-surface-variant">正在加载最新本子...</span>
            </loading-state>

            <error-state :error="jmLatestError" @retry="loadJmLatest(1)"></error-state>

            <div v-if="!jmLatestLoading && !jmLatestError && jmLatestItems.length === 0" class="flex flex-col items-center justify-center py-16 opacity-60">
                <span class="material-symbols-rounded text-6xl text-outline mb-3">new_releases</span>
                <p class="font-medium text-on-surface-variant">暂无内容</p>
                <p class="text-xs mt-2">可尝试点击右上角刷新，或切换不同分类</p>
            </div>

            <div v-if="jmLatestItems.length > 0" class="space-y-6">
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 md:gap-4">
                    <book-card 
                        v-for="book in jmLatestItems" 
                        :key="book.album_id" 
                        :book="book" 
                        @click="viewDetails">
                    </book-card>
                </div>

                <div v-if="jmLatestLoading && jmLatestItems.length" class="flex items-center justify-center py-6 opacity-60">
                    <span class="material-symbols-rounded text-4xl animate-spin text-primary">progress_activity</span>
                </div>
                <div v-else-if="!jmLatestHasMore" class="text-center text-xs opacity-60 py-4">没有更多了</div>

                <pagination-controls 
                    v-if="!jmLatestLoading"
                    :page="jmLatestPage" 
                    :loading="jmLatestLoading" 
                    :has-more="jmLatestHasMore"
                    @prev="loadJmLatest(jmLatestPage - 1)" 
                    @next="loadJmLatest(jmLatestPage + 1)">
                </pagination-controls>
            </div>
        </div>
    </transition>
