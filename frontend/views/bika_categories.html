    <transition name="fade" mode="out-in" v-cloak>
        <div v-if="currentTab === 'bika_categories'" class="space-y-6 pb-20">
            <div class="flex items-start justify-between gap-3">
                <div class="min-w-0">
                    <h2 class="text-2xl md:text-3xl font-bold flex items-center gap-3">
                        <span class="material-symbols-rounded text-primary">category</span>
                        Bika 分类
                    </h2>
                    <p class="text-sm opacity-60 mt-1">先选分类，再在分类内搜索</p>
                </div>
                <div class="flex items-center gap-2">
                    <button @click="loadBikaCategories" :disabled="bikaCategoriesLoading"
                        class="w-10 h-10 rounded-full bg-surface-variant text-on-surface-variant flex items-center justify-center hover:bg-primary hover:text-on-primary transition disabled:opacity-40">
                        <span class="material-symbols-rounded" :class="bikaCategoriesLoading ? 'animate-spin' : ''">refresh</span>
                    </button>
                    <button @click="currentTab = 'bika_home'"
                        class="w-10 h-10 rounded-full bg-surface-variant text-on-surface-variant flex items-center justify-center hover:bg-primary hover:text-on-primary transition">
                        <span class="material-symbols-rounded">arrow_back</span>
                    </button>
                </div>
            </div>

            <div v-if="!isLoggedIn" class="md-card p-6 border border-outline/10">
                <div class="flex items-center gap-3 text-on-surface-variant">
                    <span class="material-symbols-rounded text-primary">info</span>
                    <span>请先在 Settings 登录 Bika。</span>
                </div>
            </div>

            <div v-else class="md-card p-6 border border-outline/10 space-y-4">
                <div class="flex flex-col md:flex-row md:items-center gap-3">
                    <div class="flex-1 md-input-container flex items-center px-4 h-12">
                        <span class="material-symbols-rounded text-primary mr-3">search</span>
                        <input v-model="bikaCategoryKeyword" class="md-input w-full text-sm" placeholder="在分类内输入关键词（必填）">
                    </div>
                    <button @click="bikaSearchInCategory" :disabled="!bikaSelectedCategory || !bikaCategoryKeyword.trim()"
                        class="md-btn-primary h-12 px-6 disabled:opacity-40 disabled:cursor-not-allowed">
                        <span class="material-symbols-rounded">travel_explore</span>
                        搜索
                    </button>
                </div>

                <div class="text-sm opacity-70">
                    当前分类：
                    <span class="font-bold text-primary">{{ bikaSelectedCategory || '未选择' }}</span>
                </div>

                <div v-if="bikaCategoriesLoading" class="flex items-center justify-center py-10 opacity-60">
                    <span class="material-symbols-rounded text-4xl animate-spin text-primary">progress_activity</span>
                </div>

                <div v-else class="flex flex-wrap gap-2">
                    <button v-for="c in bikaCategories" :key="String(c.title || c.name || c)"
                        @click="selectBikaCategory(c)"
                        class="h-10 px-4 rounded-full border text-sm font-medium transition"
                        :class="bikaSelectedCategory === (c.title || c.name || c) ? 'bg-primary text-on-primary border-transparent shadow-md' : 'bg-surface text-on-surface border-outline/20 hover:bg-primary/10'">
                        {{ c.title || c.name || c }}
                    </button>
                </div>
            </div>
        </div>
    </transition>
